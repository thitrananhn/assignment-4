-- MySQL Script generated by MySQL Workbench
-- Tue Mar  5 11:47:34 2019
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema tables
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema tables
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `jbaesler` DEFAULT CHARACTER SET utf8 ;
USE `jbaesler` ;


/*
Address Table Creation
*/
-- -----------------------------------------------------
-- Table `jbaesler`.`Address`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `jbaesler`.`Address` ;

CREATE TABLE IF NOT EXISTS `jbaesler`.`Address` (
  `addressKey` INT NOT NULL AUTO_INCREMENT,
  `street` VARCHAR(200) NOT NULL,
  `city` VARCHAR(200) NOT NULL,
  `state` VARCHAR(200) NOT NULL,
  `zip` VARCHAR(200) NOT NULL,
  `country` VARCHAR(200) NOT NULL,
  PRIMARY KEY (`addressKey`))
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `jbaesler`.`Email`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `jbaesler`.`Email` ;

CREATE TABLE IF NOT EXISTS `jbaesler`.`Email` (
  `emailKey` INT NOT NULL AUTO_INCREMENT,
  `email` VARCHAR(200),
  `personKey` INT NOT NULL,
  PRIMARY KEY (`emailKey`))
ENGINE = InnoDB;

/*
Person Table Creation
*/
-- -----------------------------------------------------
-- Table `jbaesler`.`Person`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `jbaesler`.`Person` ;

CREATE TABLE IF NOT EXISTS `jbaesler`.`Person` (
  `personKey` INT NOT NULL AUTO_INCREMENT,
  `personCode` VARCHAR(200) NOT NULL,
  `name` VARCHAR(200) NOT NULL,
  `addressKey` INT NOT NULL,
  `email` VARCHAR(200) NOT NULL,
  PRIMARY KEY (`personKey`))
  engine=InnoDB;

/*
Customer Table Creation
*/
-- -----------------------------------------------------
-- Table `jbaesler`.`Customer`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `jbaesler`.`Customer` ;

CREATE TABLE IF NOT EXISTS `jbaesler`.`Customer` (
  `customerPrimaryKey` INT NOT NULL AUTO_INCREMENT,
  `customerCode` VARCHAR(200) NOT NULL,
  `customerType` VARCHAR(200) NOT NULL,
  `personKey` INT NOT NULL COMMENT 'Primary Contact',
  `customerName` VARCHAR(200) NOT NULL,
  `addressKey` INT NOT NULL,
  PRIMARY KEY (`customerPrimaryKey`),
  CONSTRAINT `personKey`
    FOREIGN KEY (`personKey`)
    REFERENCES `jbaesler`.`Person` (`personKey`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `addressKey`
    FOREIGN KEY (`addressKey`)
    REFERENCES `jbaesler`.`Address` (`addressKey`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

/*
Invoice and Product Linking Table Creation
*/
-- -----------------------------------------------------
-- Table `jbaesler`.`InvoiceProductList`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `jbaesler`.`InvoiceProductList` ;

CREATE TABLE IF NOT EXISTS `jbaesler`.`InvoiceProductList` (
  `listKey` INT NOT NULL AUTO_INCREMENT,
  `invoiceKey` INT NOT NULL,
  `productKey` INT NOT NULL,
  PRIMARY KEY (`listKey`))
ENGINE = InnoDB;

/*
Invoice Table Creation
*/
-- -----------------------------------------------------
-- Table `jbaesler`.`Invoice`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `jbaesler`.`Invoice` ;
CREATE TABLE IF NOT EXISTS `jbaesler`.`Invoice` (
  `invoiceKey` INT NOT NULL AUTO_INCREMENT,
  `invoiceCode` VARCHAR(200) NOT NULL,
  `customerKey` INT NOT NULL,
  `personKey` INT NOT NULL,
  PRIMARY KEY (`invoiceKey`))
ENGINE = InnoDB;

/*
Product Table Creation
*/
-- -----------------------------------------------------
-- Table `jbaesler`.`Product`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `jbaesler`.`Product` ;
CREATE TABLE IF NOT EXISTS `jbaesler`.`Product` (
  `productKey` INT NOT NULL AUTO_INCREMENT,
  `productCode` VARCHAR(200) NOT NULL,
  `productType` VARCHAR(200) NOT NULL,
  `productName` VARCHAR(200) NOT NULL,
  `personKey` INT,
  `unitPrice` DOUBLE,
  `hourlyFee` DOUBLE,
  `serviceFee` DOUBLE,
  `annualLicenseFee` DOUBLE,
    PRIMARY KEY (`productKey`),
	CONSTRAINT Equipment UNIQUE (
		`unitPrice`,
		`productType`
    ),
    CONSTRAINT Consultation UNIQUE (
		`hourlyFee`,
        `productType`,
        `personKey`
    ),
     CONSTRAINT License UNIQUE (
		`serviceFee`,
        `annualLicenseFee`,
        `productType`
    ),
    FOREIGN KEY (`personKey`)
		REFERENCES `jbaesler`.`Person` (`personKey`)
		ON DELETE NO ACTION
		ON UPDATE NO ACTION)
ENGINE = InnoDB;

SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
/*
Inserting Address Data
*/
INSERT INTO Email VALUES	(1,'hphippen0@theguardian.com',1),
							(2,'ebert1@google.it',2),
                            (3,'nfrossell2@home.pl',3),
                            (4,'nharsant3@bizjournals.com',4),
                            (5,'test4@seeifitworks.com',4),
                            (6,'sgrigolon4@paypal.com',5),
                            (7,'edebrett5@deviantart.com',6),
                            (8,'ekorting6@google.co.jp',7),
                            (9,'sarnison7@newyorker.com',8),
                            (10,'egirsch8@hud.gov',9),
                            (11,'jlangelaan9@etsy.com',10),
                            (12,'kguytona@cargocollective.com',11),
                            (13,'glightowlerb@wsj.com',12),
                            (14,'tglenisterc@seattletimes.com',13),
                            (15,'cvernalld@wordpress.org',14),
                            (16,'jtonnae@twitpic.com',15),
                            (17,'pfraschinif@studiopress.com',16),
                            (18,'kschonfeldg@delicious.com',17),
                            (19,'twemh@blogger.com',18),
                            (20,'cstallworthi@squidoo.com',19),
                            (21,'vnatonj@gnu.org', 20);
  
INSERT INTO Address VALUES	(1,'8 Claremont Junction','Lansing','MI','64324','USA'),
							(2,'61 Warner Avenue','Daytona Beach','FL','87263','USA'),
                            (3,'11219 Onsgard Trail','Hayward','CA','92760','USA'),
                            (4,'18 Morrow Terrace','Hicksville','NY','90909','USA'),
                            (5,'95461 Spaight Road','Daytona Beach','FL','47284','USA'),
                            (6,'92 Carey Pass','New York City','NY','12152','USA'),
                            (7,'2 Northfield Trail','Daytona Beach','FL','77777','USA'),
                            (8,'09 Continental Alley','Oceanside','CA','25635','USA'),
                            (9,'8251 Shoshone Court','Richmond','VA','62354','USA'),
                            (10,'9881 Sutteridge Court','Tampa','FL','75269','USA'),
                            (11,'38446 Butternut Crossing','Katy','TX','86356','USA'),
                            (12,'2059 Kropf Plaza','Evansville','IN','41168','USA'),
                            (13,'0902 Judy Trail','Charlotte','NC','34754','USA'),
                            (14,'9443 Schiller Parkway','Springfield','IL','18424','USA'),
                            (15,'97445 Monica Circle','Hartford','CT','95894','USA'),
                            (16,'567 Cherokee Trail','Lexington','KY','49841','USA'),
                            (17,'2609 Surrey Pass','Pensacola','FL','18412','USA'),
                            (18,'246 John Wall Plaza','Wilmington','NC','29415','USA'),
                            (19,'0 Kensington Pass','Atlanta','GA','59549','USA'),
                            (20,'909 Tennessee Way','Jamaica','NY','94264','USA'),
                            (21,'08 Lighthouse Bay Drive','Columbus','GA','31990','USA'),
                            (22,'6833 Fairfield Alley','Gainesville','FL','32605','USA'),
                            (23,'79 Orin Lane','Greenville','SC','29605','USA'),
                            (24,'27290 Trailsway Hill','Saint Paul','MN','55172','USA'),
                            (25,'33 Grasskamp Center','Providence','RI','02912','USA'),
                            (26,'2 Stang Hill','Tampa','FL','33686','USA'),
                            (27,'4 Algoma Junction','Springfield','IL','62764','USA');
  
  /*
Inserting Customer Data
*/
INSERT INTO Customer VALUES	(1,'C001','G',1,'Beatty Inc',21),
							(2,'C002','G',4,'"Cummerata, Ullrich and Metz"',22),
							(3,'C003','G',7,'Howe and Sons',23),
							(4,'C004','C',11,'Stark-Tromp',24),
							(5,'C005','G',14,'Bergnaum-Connelly',25),
							(6,'C006','C',17,'Hills-Schowalter',26),
                            (7,'C007','C',18,'Schneider-Sporer',27);



/*
Inserting Person Data
*/
INSERT INTO Person VALUES	(1,'974a','Phippen,Hamil',1,'hphippen0@theguardian.com'),
                            (2,'359k','Bert,Egor',2,'ebert1@google.it'),
                            (3,'682c','Frossell,Noam',3,'nfrossell2@home.pl'),
                            (4,'779b','Harsant,Norman',4,'nharsant3@bizjournals.com,test4@seeifitworks.com'),
							(5,'562k','Grigolon,Sarah',5,'sgrigolon4@paypal.com'),
							(6,'399e','De Brett,Elissa',6,'edebrett5@deviantart.com'),
							(7,'142j','Korting,Elnore',7,'ekorting6@google.co.jp'),
							(8,'554w','Arnison,Sandye',8,'sarnison7@newyorker.com'),
							(9,'465l','Girsch,Emmie',9,'egirsch8@hud.gov'),
							(10,'450b','Langelaan,Joachim',10,'jlangelaan9@etsy.com'),
							(11,'036j','Guyton,Kim',11,'kguytona@cargocollective.com'),
							(12,'970h','Lightowler,Gilbertine',12,'glightowlerb@wsj.com'),
							(13,'305c','Glenister,Thaxter',13,'tglenisterc@seattletimes.com'),
							(14,'046o','Vernall,Candace',14,'cvernalld@wordpress.org'),
							(15,'138s','Tonna,Juliette',15,'jtonnae@twitpic.com'),
							(16,'812x','Fraschini,Patience',16,'pfraschinif@studiopress.com'),
							(17,'713d','Schonfeld,Karita',17,'kschonfeldg@delicious.com'),
							(18,'517j','Wem,Thorny',18,'twemh@blogger.com'),
							(19,'682q','Stallworth,Con',19,'cstallworthi@squidoo.com'),
							(20,'864d','Naton,Vincent',20,'vnatonj@gnu.org');



INSERT INTO Product (productKey, productCode, productType, productName, serviceFee, annualLicenseFee)
			VALUES	(1,'7dtc','L','Cinco Security System','0.00','1025.00');
INSERT INTO Product (productKey, productCode, productType, productName, unitPrice)
			VALUES	(2,'6l6c','E','Cinco Dance-Pad Keyboard','200.00');
INSERT INTO Product (productKey, productCode, productType, productName, unitPrice)
			VALUES	(3,'lew8','E','Cinco Projected Mouse','125.00');
INSERT INTO Product (productKey, productCode, productType, productName, personKey, hourlyFee)
			VALUES	(4,'ldrs','C','Security Advisor',6,'85.00');
INSERT INTO Product (productKey, productCode, productType, productName, serviceFee, annualLicenseFee)
			VALUES	(5,'qcsh','L','Cinco Augmented Reality Software','250.00','1750.00');
INSERT INTO Product (productKey, productCode, productType, productName, unitPrice) 
			VALUES	(6,'q6fd','E','Cinco Wireless Monitor','1500.00');


INSERT INTO InvoiceProductList VALUES	(1,1,3),
										(2,1,1),
										(3,2,3),
										(4,2,2),
										(5,2,4),
										(6,3,4),
										(7,3,5),
										(8,4,2),
										(9,4,5),
										(10,4,1),
										(11,5,6);

/*
MAKE NEW TABLE TO RELATE THE TWO, same for emails
*/
INSERT INTO Invoice VALUES	(1,'INV001',1,2),
							(2,'INV002',7,6),
							(3,'INV003',5,12),
							(4,'INV004',3,15),
							(5,'INV005',2,20);
                            
Select * From Invoice;
Select * From Product;
Select * From Person;
Select * From Address;
Select * From Email;
Select * From InvoiceProductList;
Select * From Customer;
